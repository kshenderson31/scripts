/*
 * jALGridView version 1.5.0
 * Copyright 2010, Assign Labs
 * licensed under the GPL licenses.
 * Released under the GPL Licenses.
 * Date: Thu Oct 07 12:45:00
 */
jQuery.fn.jALGridView=function(a){var c={id:$(this).attr("id"),rowIndex:0,jsonDefaultSettings:a,arrStrHtml:[]};var b={processCellTemplate:function(d){var f=d.StrTemplate;for(var e=0;e<d.TemplateParams.length;e++){f=f.replace(new RegExp("{%="+d.TemplateParams[e]+"%}","gi"),d.Data[d.TemplateParams[e]])}return f},validateJson:function(){if(c.id&&c.id!==""){return true}else{alert("Please provide container id.")}},validateJsonForSoting:function(d){if(c.jsonDefaultSettings.Rows.Header.OnColumnHeaderClicked){if(c.jsonDefaultSettings.Columns[d].SortOrder){if(c.jsonDefaultSettings.Columns[d].SortOrder.toUpperCase()=="ASC"||c.jsonDefaultSettings.Columns[d].SortOrder.toUpperCase()=="DESC"){return true}else{alert("SortOrder is not defined correctly for '"+c.jsonDefaultSettings.Columns[d].HeaderText+"'. This must be 'ASC' or 'DESC'")}}else{alert("SortOrder is not defined for '"+c.jsonDefaultSettings.Columns[d].HeaderText+"'.")}}else{alert("OnColumnHeaderClicked is not defined for '"+c.jsonDefaultSettings.Columns[d].HeaderText+"'.")}return false},createHeaderCell:function(e){if(c.jsonDefaultSettings.Rows.Header.BulHeaderIsEnabled){var g="";c.arrStrHtml.push("<th ");if(c.jsonDefaultSettings.Columns[e].HeaderStyleClassName){c.arrStrHtml.push('class="');c.arrStrHtml.push(c.jsonDefaultSettings.Columns[e].HeaderStyleClassName);c.arrStrHtml.push('"')}c.arrStrHtml.push(" >");if(c.jsonDefaultSettings.Columns[e].AllowSorting&&b.validateJsonForSoting(e)){var f="";var d="lnk"+c.jsonDefaultSettings.Columns[e].DataFieldName+e;if(c.jsonDefaultSettings.Columns[e].SortOrder.toUpperCase()=="ASC"){f=c.jsonDefaultSettings.Columns[e].SortedOrderAscImgCSS}else{if(c.jsonDefaultSettings.Columns[e].SortOrder.toUpperCase()=="DESC"){f=c.jsonDefaultSettings.Columns[e].SortedOrderDescImgCSS}}if(c.jsonDefaultSettings.Columns[e].HeaderTextStyleCss){g=c.jsonDefaultSettings.Columns[e].HeaderTextStyleCss}c.arrStrHtml.push('<div><a href="javascript:void(0);" id="'+d+'" SortColumn="'+c.jsonDefaultSettings.Columns[e].DataFieldName+'" SortOrder="'+c.jsonDefaultSettings.Columns[e].SortOrder+'"><span  class="'+g+'">'+c.jsonDefaultSettings.Columns[e].HeaderText+'</span><span class="'+f+'"></span></a></div>')}else{c.arrStrHtml.push("<div>"+c.jsonDefaultSettings.Columns[e].HeaderText+"</div>")}c.arrStrHtml.push("</th>")}},createMultipleHeaderCell:function(h,f){if(c.jsonDefaultSettings.Rows.Header.BulHeaderIsEnabled){var e=c.jsonDefaultSettings.HeaderCollection[h].HeaderRow[f].Index;var i="";c.arrStrHtml.push('<th colspan="'+c.jsonDefaultSettings.HeaderCollection[h].HeaderRow[f].ColSpan+'" rowspan="'+c.jsonDefaultSettings.HeaderCollection[h].HeaderRow[f].RowSpan+'"');if(c.jsonDefaultSettings.Columns[f].HeaderStyleClassName){c.arrStrHtml.push('class="');c.arrStrHtml.push(c.jsonDefaultSettings.Columns[f].HeaderStyleClassName);c.arrStrHtml.push('"')}c.arrStrHtml.push(" >");if(c.jsonDefaultSettings.HeaderCollection[h].HeaderRow[f].Index&&c.jsonDefaultSettings.Columns[e].AllowSorting&&b.validateJsonForSoting(e)){var g="";var d="lnk"+c.jsonDefaultSettings.Columns[e].DataFieldName+f;if(c.jsonDefaultSettings.Columns[e].SortOrder.toUpperCase()=="ASC"){g=c.jsonDefaultSettings.Columns[e].SortedOrderAscImgCSS}else{if(c.jsonDefaultSettings.Columns[e].SortOrder.toUpperCase()=="DESC"){g=c.jsonDefaultSettings.Columns[e].SortedOrderDescImgCSS}}if(c.jsonDefaultSettings.Columns[e].HeaderTextStyleCss){i=c.jsonDefaultSettings.Columns[e].HeaderTextStyleCss}c.arrStrHtml.push('<div><a href="javascript:void(0);" id="'+d+'" SortColumn="'+c.jsonDefaultSettings.Columns[e].DataFieldName+'" SortOrder="'+c.jsonDefaultSettings.Columns[e].SortOrder+'"><span  class="'+i+'">'+c.jsonDefaultSettings.HeaderCollection[h].HeaderRow[f].HeaderText+'</span><span class="'+g+'"></span></a></div>')}else{c.arrStrHtml.push("<div>"+c.jsonDefaultSettings.HeaderCollection[h].HeaderRow[f].HeaderText+"</div>");c.arrStrHtml.push("</th>")}}},createColGroupCell:function(d){c.arrStrHtml.push("<Col ");if(c.jsonDefaultSettings.Columns[d].ColStyleClassName){c.arrStrHtml.push('class="');c.arrStrHtml.push(c.jsonDefaultSettings.Columns[d].ColStyleClassName);c.arrStrHtml.push('"')}c.arrStrHtml.push(" >");c.arrStrHtml.push("</Col>")},createItemCell:function(f,d,g){c.arrStrHtml.push("<td ");if(c.jsonDefaultSettings.Columns[d].ItemStyleClassName){c.arrStrHtml.push('class="');c.arrStrHtml.push(c.jsonDefaultSettings.Columns[d].ItemStyleClassName);c.arrStrHtml.push('"')}c.arrStrHtml.push(" >");if(c.jsonDefaultSettings.Columns[d].StrItemTemplate&&c.jsonDefaultSettings.Columns[d].StrItemTemplate!==""){var e={Data:c.jsonDefaultSettings.DataSource[f],StrTemplate:c.jsonDefaultSettings.Columns[d].StrItemTemplate,TemplateParams:c.jsonDefaultSettings.Columns[d].TemplateParams};c.arrStrHtml.push(b.processCellTemplate(e))}else{c.arrStrHtml.push(c.jsonDefaultSettings.DataSource[f][g])}c.arrStrHtml.push("</td>")},createAlternateItemCell:function(f,d,g){c.arrStrHtml.push("<td ");if(c.jsonDefaultSettings.Columns[d].AlternateItemStyleClassName){c.arrStrHtml.push('class="');c.arrStrHtml.push(c.jsonDefaultSettings.Columns[d].AlternateItemStyleClassName);c.arrStrHtml.push('"')}c.arrStrHtml.push(" >");if(c.jsonDefaultSettings.Columns[d].StrItemTemplate&&c.jsonDefaultSettings.Columns[d].StrItemTemplate!==""){var e={Data:c.jsonDefaultSettings.DataSource[f],StrTemplate:c.jsonDefaultSettings.Columns[d].StrItemTemplate,TemplateParams:c.jsonDefaultSettings.Columns[d].TemplateParams};c.arrStrHtml.push(b.processCellTemplate(e))}else{c.arrStrHtml.push(c.jsonDefaultSettings.DataSource[f][g])}c.arrStrHtml.push("</td>")},createGroupItemCell:function(f,d,g){c.arrStrHtml.push('<td rowspan="'+c.jsonDefaultSettings.DataSource[f][d+"_rowspan"]+'" ');if(c.jsonDefaultSettings.Columns[d].ItemStyleClassName){c.arrStrHtml.push('class="');c.arrStrHtml.push(c.jsonDefaultSettings.Columns[d].ItemStyleClassName);c.arrStrHtml.push('"')}c.arrStrHtml.push(" >");if(c.jsonDefaultSettings.Columns[d].StrItemTemplate&&c.jsonDefaultSettings.Columns[d].StrItemTemplate!==""){var e={Data:c.jsonDefaultSettings.DataSource[f],StrTemplate:c.jsonDefaultSettings.Columns[d].StrItemTemplate,TemplateParams:c.jsonDefaultSettings.Columns[d].TemplateParams};c.arrStrHtml.push(b.processCellTemplate(e))}else{c.arrStrHtml.push(c.jsonDefaultSettings.DataSource[f][g])}c.arrStrHtml.push("</td>")},createAlternateGroupItemCell:function(f,d,g){c.arrStrHtml.push('<td rowspan="'+c.jsonDefaultSettings.DataSource[f][d+"_rowspan"]+'" ');if(c.jsonDefaultSettings.Columns[d].AlternateItemStyleClassName){c.arrStrHtml.push('class="');c.arrStrHtml.push(c.jsonDefaultSettings.Columns[d].AlternateItemStyleClassName);c.arrStrHtml.push('"')}c.arrStrHtml.push(" >");if(c.jsonDefaultSettings.Columns[d].StrItemTemplate&&c.jsonDefaultSettings.Columns[d].StrItemTemplate!==""){var e={Data:c.jsonDefaultSettings.DataSource[f],StrTemplate:c.jsonDefaultSettings.Columns[d].StrItemTemplate,TemplateParams:c.jsonDefaultSettings.Columns[d].TemplateParams};c.arrStrHtml.push(b.processCellTemplate(e))}else{c.arrStrHtml.push(c.jsonDefaultSettings.DataSource[f][g])}c.arrStrHtml.push("</td>")},updateDataWithRowSpanInfo:function(){for(var e=0;e<c.jsonDefaultSettings.Columns.length;e++){if(c.jsonDefaultSettings.Columns[e].GroupEnabled!==undefined&&c.jsonDefaultSettings.Columns[e].GroupEnabled===true){var f=0;for(var d=c.jsonDefaultSettings.DataSource.length-1;d>=0;d--){f++;if(d===0){c.jsonDefaultSettings.DataSource[d][e+"_rowspan"]=f}else{if(d!==0&&(c.jsonDefaultSettings.DataSource[d][c.jsonDefaultSettings.Columns[e].DataFieldName]==c.jsonDefaultSettings.DataSource[d-1][c.jsonDefaultSettings.Columns[e].DataFieldName]&&(c.jsonDefaultSettings.Columns[e].GroupLinkedColumn===undefined||c.jsonDefaultSettings.Columns[e].GroupLinkedColumn===""))||(c.jsonDefaultSettings.DataSource[d][c.jsonDefaultSettings.Columns[e].DataFieldName]==c.jsonDefaultSettings.DataSource[d-1][c.jsonDefaultSettings.Columns[e].DataFieldName]&&c.jsonDefaultSettings.Columns[e].GroupLinkedColumn!==undefined&&c.jsonDefaultSettings.Columns[e].GroupLinkedColumn!==""&&c.jsonDefaultSettings.DataSource[d][c.jsonDefaultSettings.Columns[c.jsonDefaultSettings.Columns[e].GroupLinkedColumn].DataFieldName]==c.jsonDefaultSettings.DataSource[d-1][c.jsonDefaultSettings.Columns[c.jsonDefaultSettings.Columns[e].GroupLinkedColumn].DataFieldName])){c.jsonDefaultSettings.DataSource[d][e+"_rowspan"]=0}else{c.jsonDefaultSettings.DataSource[d][e+"_rowspan"]=f;f=0}}}}}},createFooterCell:function(d){c.arrStrHtml.push("<td ");if(c.jsonDefaultSettings.Columns[d].FooterStyleClassName){c.arrStrHtml.push('class="');c.arrStrHtml.push(c.jsonDefaultSettings.Columns[d].FooterStyleClassName);c.arrStrHtml.push('"')}c.arrStrHtml.push(" >");if(c.jsonDefaultSettings.Columns[d].FooterText){c.arrStrHtml.push(c.jsonDefaultSettings.Columns[d].FooterText)}else{c.arrStrHtml.push("&nbsp;")}c.arrStrHtml.push("</td>")},createHeaderRow:function(){c.arrStrHtml.push("<tr ");if(c.jsonDefaultSettings.Rows.Header.RowHeaderStyleClassName){c.arrStrHtml.push('class="');c.arrStrHtml.push(c.jsonDefaultSettings.Rows.Header.RowHeaderStyleClassName);c.arrStrHtml.push('"')}c.arrStrHtml.push(" >");for(var d=0;d<c.jsonDefaultSettings.Columns.length;d++){c.arrStrHtml.push(b.createHeaderCell(d))}c.arrStrHtml.push("</tr>")},createMultipleHeaderRow:function(e){c.arrStrHtml.push("<tr ");if(c.jsonDefaultSettings.Rows.Header.RowHeaderStyleClassName){c.arrStrHtml.push('class="');c.arrStrHtml.push(c.jsonDefaultSettings.Rows.Header.RowHeaderStyleClassName);c.arrStrHtml.push('"')}c.arrStrHtml.push(" >");for(var d=0;d<c.jsonDefaultSettings.HeaderCollection[e].HeaderRow.length;d++){c.arrStrHtml.push(b.createMultipleHeaderCell(e,d))}c.arrStrHtml.push("</tr>")},createItemRow:function(e){c.arrStrHtml.push("<tr ");if(c.jsonDefaultSettings.Rows.Item.RowItemStyleClassName){c.arrStrHtml.push('class="');c.arrStrHtml.push(c.jsonDefaultSettings.Rows.Item.RowItemStyleClassName);c.arrStrHtml.push('"')}c.arrStrHtml.push(" >");for(var d=0;d<c.jsonDefaultSettings.Columns.length;d++){if(c.jsonDefaultSettings.DataSource[e][d+"_rowspan"]!==undefined&&c.jsonDefaultSettings.DataSource[e][d+"_rowspan"]==0){}else{if(c.jsonDefaultSettings.DataSource[e][d+"_rowspan"]===undefined||c.jsonDefaultSettings.DataSource[e][d+"_rowspan"]==1){c.arrStrHtml.push(b.createItemCell(e,d,c.jsonDefaultSettings.Columns[d].DataFieldName))}else{if(c.jsonDefaultSettings.DataSource[e][d+"_rowspan"]!==undefined&&c.jsonDefaultSettings.DataSource[e][d+"_rowspan"]>1){c.arrStrHtml.push(b.createGroupItemCell(e,d,c.jsonDefaultSettings.Columns[d].DataFieldName))}}}}c.arrStrHtml.push("</tr>")},createAlternateItemRow:function(e){c.arrStrHtml.push("<tr ");if(c.jsonDefaultSettings.Rows.Item.AlternateRowItemStyleClassName){c.arrStrHtml.push('class="');c.arrStrHtml.push(c.jsonDefaultSettings.Rows.Item.AlternateRowItemStyleClassName);c.arrStrHtml.push('"')}c.arrStrHtml.push(" >");for(var d=0;d<c.jsonDefaultSettings.Columns.length;d++){if(c.jsonDefaultSettings.DataSource[e][d+"_rowspan"]!==undefined&&c.jsonDefaultSettings.DataSource[e][d+"_rowspan"]==0){}else{if(c.jsonDefaultSettings.DataSource[e][d+"_rowspan"]===undefined||c.jsonDefaultSettings.DataSource[e][d+"_rowspan"]==1){c.arrStrHtml.push(b.createAlternateItemCell(e,d,c.jsonDefaultSettings.Columns[d].DataFieldName))}else{if(c.jsonDefaultSettings.DataSource[e][d+"_rowspan"]!==undefined&&c.jsonDefaultSettings.DataSource[e][d+"_rowspan"]>1){c.arrStrHtml.push(b.createAlternateGroupItemCell(e,d,c.jsonDefaultSettings.Columns[d].DataFieldName))}}}}c.arrStrHtml.push("</tr>")},createFooterRow:function(){c.arrStrHtml.push("<tr ");if(c.jsonDefaultSettings.Rows.Footer.RowFooterStyleClassName){c.arrStrHtml.push('class="');c.arrStrHtml.push(c.jsonDefaultSettings.Rows.Footer.RowFooterStyleClassName);c.arrStrHtml.push('"')}c.arrStrHtml.push(" >");for(var d=0;d<c.jsonDefaultSettings.Columns.length;d++){c.arrStrHtml.push(b.createFooterCell(d))}c.arrStrHtml.push("</tr>")},createColGroupSection:function(){c.arrStrHtml.push("<ColGroup>");for(var d=0;d<c.jsonDefaultSettings.Columns.length;d++){c.arrStrHtml.push(b.createColGroupCell(d))}c.arrStrHtml.push("</ColGroup>")},createHeaderSection:function(){c.arrStrHtml.push("<thead>");if(c.jsonDefaultSettings.HeaderCollection){for(var d=0;d<c.jsonDefaultSettings.HeaderCollection.length;d++){if(c.jsonDefaultSettings.HeaderCollection[d].HeaderRow){c.arrStrHtml.push(b.createMultipleHeaderRow(d))}}}else{c.arrStrHtml.push(b.createHeaderRow())}c.arrStrHtml.push("</thead>")},createItemSection:function(){c.arrStrHtml.push("<tbody>");for(var d=0;d<c.jsonDefaultSettings.DataSource.length;d++){if(d%2===0){c.arrStrHtml.push(b.createAlternateItemRow(d))}else{c.arrStrHtml.push(b.createItemRow(d))}}c.arrStrHtml.push("</tbody>")},createFooterSection:function(){c.arrStrHtml.push("<tfoot>");c.arrStrHtml.push(b.createFooterRow());c.arrStrHtml.push("</tfoot>")},rowDataBound:function(d){if(a.DelegateForRows){$("#"+c.id+" tbody tr").each(function(){a.DelegateForRows($(this),a.DataSource[c.rowIndex]);c.rowIndex=c.rowIndex+1;if(c.rowIndex*1==a.DataSource.length*1){c.rowIndex=0}})}},addRowClassOnHover:function(){$(this).addClass(a.Rows.Item.RowHoverStyleClassName)},removeRowClassOnHover:function(){$(this).removeClass(a.Rows.Item.RowHoverStyleClassName)},onColumnHeaderClicked:function(){a.Rows.Header.OnColumnHeaderClicked($(this),{SortOrder:$(this).attr("SortOrder"),SortColumn:$(this).attr("SortColumn")})},onHeaderRowClicked:function(d){if($(d.target).is("a")||$(d.target).is("span")||$(d.target).is("nobr")){$(d.target).trigger("customEventForSorting")}},createTable:function(){if(b.validateJson()){if(c.jsonDefaultSettings&&c.jsonDefaultSettings.DataSource.length>0){var e="cellpadding=0";var d="cellspacing=0";if(c.jsonDefaultSettings.Grid.Cellpadding){e="cellpadding='"+c.jsonDefaultSettings.Grid.Cellpadding+"'"}if(c.jsonDefaultSettings.Grid.Cellspacing){d="cellspacing='"+c.jsonDefaultSettings.Grid.Cellspacing+"'"}c.arrStrHtml.push('<table id="tbl'+c.id+'"');c.arrStrHtml.push(d+" ");c.arrStrHtml.push(e);if(c.jsonDefaultSettings.Grid.GridStyleClassName){c.arrStrHtml.push('class="');c.arrStrHtml.push(c.jsonDefaultSettings.Grid.GridStyleClassName)}c.arrStrHtml.push('" >');if(c.jsonDefaultSettings.Rows.Header.BulHeaderIsEnabled){c.arrStrHtml.push(b.createColGroupSection());c.arrStrHtml.push(b.createHeaderSection())}c.arrStrHtml.push(b.createItemSection());if(c.jsonDefaultSettings.Rows.Footer.BulFooterIsEnabled){c.arrStrHtml.push(b.createFooterSection())}c.arrStrHtml.push("</table>")}else{}$("#"+c.id).html(c.arrStrHtml.join(""));$("#"+c.id).bind("customEventForgridViewRow",b.rowDataBound);$("#"+c.id).trigger("customEventForgridViewRow");if(c.jsonDefaultSettings.Rows.Header.BulHeaderIsEnabled&&c.jsonDefaultSettings.Rows.Header.OnColumnHeaderClicked){$("#"+c.id+" thead a ").bind("customEventForSorting",b.onColumnHeaderClicked);$("#"+c.id+" thead").click(b.onHeaderRowClicked)}if(a.Rows&&a.Rows.Item&&a.Rows.Item&&a.Rows.Item.RowHoverStyleClassName){$("#"+c.id+" tbody tr").hover(b.addRowClassOnHover,b.removeRowClassOnHover)}}}};$("#"+c.id).unbind("customEventForSorting");$("#"+c.id).unbind("customEventForgridViewRow");$("#"+c.id).empty();b.updateDataWithRowSpanInfo();b.createTable()};